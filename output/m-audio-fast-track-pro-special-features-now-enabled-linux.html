<!DOCTYPE html>
<html lang="fr"
      >
<head>
    <title>M-Audio Fast Track Pro and Quattro special features now enabled for Linux - Yomguy's blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
                
    <link rel="canonical" href="http://yomix.org/m-audio-fast-track-pro-special-features-now-enabled-linux.html">

                <meta name="author" content="Guillaume Pellerin" />
                <meta name="keywords" content="audio,usb,kernel,RT,realtime,Linux" />
                <meta name="description" content="M-Audio Fast Track Pro and Quattro special features now enabled for Linux" />
    
                                    
                    <meta name="twitter:card" content="summary">
            <meta name="twitter:site" content="@yomguy">
        <meta name="twitter:creator" content="@yomguy">
        <meta name="twitter:domain" content="http://yomix.org">
                
    <!-- Bootstrap -->
            <link rel="stylesheet" href="http://yomix.org/theme/css/bootstrap.united.min.css" type="text/css"/>
        <link href="http://yomix.org/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://yomix.org/theme/css/pygments/native.css" rel="stylesheet">
            <link rel="stylesheet" href="http://yomix.org/theme/css/style.css" type="text/css"/>
    
            <link href="http://yomix.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Yomguy's blog ATOM Feed"/>
        
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://yomix.org/" class="navbar-brand">
                                Yomguy's blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                                                                                                                                <li >
                            <a href="http://yomix.org/category/about.html">About</a>
                        </li>
                                            <li class="active">
                            <a href="http://yomix.org/category/linux.html">Linux</a>
                        </li>
                                            <li >
                            <a href="http://yomix.org/category/projects.html">Projects</a>
                        </li>
                                            <li >
                            <a href="http://yomix.org/category/technologies.html">Technologies</a>
                        </li>
                                            <li >
                            <a href="http://yomix.org/category/wtf.html">Wtf</a>
                        </li>
                                                </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://yomix.org/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
                <div class="col-sm-9">
                    
            <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://yomix.org/m-audio-fast-track-pro-special-features-now-enabled-linux.html"
                       rel="bookmark"
                       title="Permalink to M-Audio Fast Track Pro and Quattro special features now enabled for Linux">
                        M-Audio Fast Track Pro and Quattro special features now enabled for Linux
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
                        <footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2011-07-14T07:33:00"> jeu. 14 juillet 2011</time>
    </span>
    
    
    
    <span class="label label-default">Tags</span>
	<a href="http://yomix.org/tag/audio.html">audio</a>
            /
    	<a href="http://yomix.org/tag/usb.html">usb</a>
            /
    	<a href="http://yomix.org/tag/kernel.html">kernel</a>
            /
    	<a href="http://yomix.org/tag/rt.html">RT</a>
            /
    	<a href="http://yomix.org/tag/realtime.html">realtime</a>
            /
    	<a href="http://yomix.org/tag/linux.html">Linux</a>
            
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>A few month ago, I was looking for a 24 bits driver for the Fast Track Pro included in the <a href="http://parisson.com/products/tc-202-case-1/">TC-202</a>.</p>
<p>I found a patch for the 2.6.31 kernel on <a href="http://joegiampaoli.blogspot.com/2011/06/m-audio-fast-track-pro-for-debian-linux.html">Joe Giampaoli's blog</a>  which were written first by Pavel Polischouk. It added some quirks to the snd-usb-audio driver enabling 24 bits, 96 kHz and other special features for the FTP. Then, I adapted it for 2.6.33 RT and <a href="http://files.parisson.com/debian/usbaudio-ftp-2.6.33.7-yomguy.patch">published it</a>.</p>
<p>Now that the kernel 2.6.39 includes almost all of the realtime functions - like threaded IRQs for example - I decided to produce the same patch for it. Not trivial for me because I'm not really a C developer and the driver architecture had been changed. But it just works now...</p>
<p>After some mail exchanges with interested people and beta testing, I'm very happy to <a href="http://files.parisson.com/debian/snd-usb-audio-FTP-2.6.39-yomguy-04.patch">release this patch</a>. You just need to apply it the 2.6.39 sources but NO RT patch anymore and compile the kernel. Don't forget to add "threadirqs" to the kernel boot arguments, for example adding it to the grub conf.</p>
<p>On Debian, add this to /etc/default/grub :</p>
<div class="highlight"><pre><span class="n">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s">&quot;threadirqs&quot;</span>
</pre></div>


<p>and then do in a shell:</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">update</span><span class="o">-</span><span class="n">grub</span>
</pre></div>


<p>Special configurations can be then loaded through a modprobe conf file. For example, to set the 24 bits mode on the Fast Track Pro plus digital inputs and outputs, add this to /etc/modprobe.d/fast-track-pro.conf :</p>
<div class="highlight"><pre><span class="n">options</span> <span class="n">snd_usb_audio</span>   <span class="n">vid</span><span class="o">=</span><span class="mh">0x763</span> <span class="n">pid</span><span class="o">=</span><span class="mh">0x2012</span> <span class="n">device_setup</span><span class="o">=</span><span class="mh">0xB</span> <span class="n">enable</span><span class="o">=</span><span class="mi">1</span>
</pre></div>


<p>Here is a list of the possibilities in <a href="http://files.parisson.com/debian/fast-track-pro.conf">this example</a>.</p>
<p>Don't forget to comment out other snd-usb-audio entries in ? /etc/modprobe.d/alsa-base.conf</p>
<p>Thanks a LOT to Takashi Iwai, the patch has been <a href="http://git.kernel.org/?p=linux/kernel/git/tiwai/sound-2.6.git;a=commitdiff;h=0f5733b0c883158b13366ae34b5e4bd52a1ac346;hp=3101ba035ca9ba92f6cec7fd37348646b7a5cb61">applied to the sound kernel branch</a> and <a href="http://git.kernel.org/?p=linux/kernel/git/tiwai/sound-2.6.git;a=commitdiff;h=02e5fbf622aabf68bdc02282a17a3aeed054237a">merged</a> . It will be added to Linux 3.1 !</p>
<p>Enjoy ;)</p>
            </div>
            <!-- /.entry-content -->
                                        <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'yomguysblog'; // required: replace example with your forum shortname

                                                var disqus_identifier = 'm-audio-fast-track-pro-special-features-now-enabled-linux';
                                var disqus_url = 'http://yomix.org/m-audio-fast-track-pro-special-features-now-enabled-linux.html';
            
            var disqus_config = function () {
                this.language = "fr";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
                <div class="col-sm-3" id="sidebar">
            <aside>
                                            
<section class="well well-sm">
    <ul class="list-group list-group-flush">
                    <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                                                                                                                    <li class="list-group-item"><a href="https://twitter.com/yomguy/"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
                                                                                                                    <li class="list-group-item"><a href="https://plus.google.com/+GuillaumePellerin"><i class="fa fa-google-plus-square fa-lg"></i> Google+</a></li>
                                                                                                                    <li class="list-group-item"><a href="http://www.linkedin.com/in/guillaumepellerin"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
                                                                                                                    <li class="list-group-item"><a href="https://github.com/yomguy/"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
                                                                                                                    <li class="list-group-item"><a href="http://lastfm.com/user/yomguy"><i class="fa fa-lastfm-square fa-lg"></i> LastFM</a></li>
                                                                                                                    <li class="list-group-item"><a href="https://www.facebook.com/yomguy75"><i class="fa fa-facebook-square fa-lg"></i> FaceBook</a></li>
                              </ul>
            </li>
        
        
        
                                                            <li class="list-group-item"><a href="http://yomix.org/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group " id="tags">
                                    <li class="list-group-item tag-1">
                        <a href="http://yomix.org/tag/about.html">
                            about
                        </a>
                    </li>
                                    <li class="list-group-item tag-1">
                        <a href="http://yomix.org/tag/realtime.html">
                            realtime
                        </a>
                    </li>
                                    <li class="list-group-item tag-1">
                        <a href="http://yomix.org/tag/audio.html">
                            audio
                        </a>
                    </li>
                                    <li class="list-group-item tag-1">
                        <a href="http://yomix.org/tag/rt.html">
                            RT
                        </a>
                    </li>
                                    <li class="list-group-item tag-1">
                        <a href="http://yomix.org/tag/linux.html">
                            Linux
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/usb.html">
                            usb
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/fstab.html">
                            fstab
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/wifi.html">
                            WiFi
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/telemeta.html">
                            Telemeta
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/kernel.html">
                            kernel
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/telecaster.html">
                            TeleCaster
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/boot.html">
                            boot
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/gsm.html">
                            GSM
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/timeside.html">
                            TimeSide
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/reseau.html">
                            réseau
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/bio.html">
                            bio
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/france.html">
                            France
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/parisson.html">
                            Parisson
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/linux.html">
                            linux
                        </a>
                    </li>
                                    <li class="list-group-item tag-4">
                        <a href="http://yomix.org/tag/crash.html">
                            crash
                        </a>
                    </li>
                                </ul>
            </li>
                
    <li class="list-group-item"><h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
        <div id="gh_repos">
            <p class="list-group-item">Status updating...</p>
        </div>
            </li>
        
    <li class="list-group-item"><h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4></li>
    <div id="twitter_timeline">
        <a class="twitter-timeline" data-chrome="noheader" href="https://twitter.com/yomguy" data-widget-id="516222825451888640">Tweets by yomguy</a>
    </div>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

            <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
                <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
                <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
                <li class="list-group-item">
            <a href="http://jinja.pocoo.org/" target="_blank">
                Jinja2
            </a>
        </li>
                <li class="list-group-item">
            <a href="https://www.djangoproject.com/" target="_blank">
                Django
            </a>
        </li>
              </ul>
    </li>
    </ul>
</section>
                        </aside>
        </div>
            </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
                                       <div class="col-xs-10">&copy; 2014 Guillaume Pellerin
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://yomix.org/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://yomix.org/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://yomix.org/theme/js/respond.min.js"></script>

                                    <!-- GitHub JS -->
    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = 'http://yomix.org/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'yomguy',
                count: 5,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="http://yomix.org/theme/js/github.js" type="text/javascript"></script>
    <!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'yomguysblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
</body>
</html>