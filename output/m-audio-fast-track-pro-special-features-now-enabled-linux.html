<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>M-Audio Fast Track Pro and Quattro special features now enabled for Linux</title>
        <link rel="stylesheet" href="/theme/css/main.css">
                
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Yomguy's blog </a></h1>
                <nav><ul>
                                                                                    <li class="active"><a href="/category/linux.html">Linux</a></li>
                                    <li ><a href="/category/projects.html">Projects</a></li>
                                    <li ><a href="/category/technology.html">Technology</a></li>
                                    <li ><a href="/category/wtf.html">WTF</a></li>
                                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/m-audio-fast-track-pro-special-features-now-enabled-linux.html" rel="bookmark"
           title="Permalink to M-Audio Fast Track Pro and Quattro special features now enabled for Linux">M-Audio Fast Track Pro and Quattro special features now enabled for Linux</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2011-07-14T07:33:00">
                jeu. 14 juillet 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="/author/guillaume-pellerin.html">Guillaume Pellerin</a>
        </address>
        <p>In <a href="/category/linux.html">Linux</a>. </p>
<p>tags: <a href="/tag/pelican.html">pelican</a><a href="/tag/publishing.html">publishing</a></p>
</footer><!-- /.post-info -->      <p>A few month ago, I was looking for a 24 bits driver for the Fast Track Pro included in the <a href="http://parisson.com/products/tc-202-case-1/">TC-202</a>.</p>
<p>I found a patch for the 2.6.31 kernel on <a href="http://joegiampaoli.blogspot.com/2011/06/m-audio-fast-track-pro-for-debian-linux.html">Joe Giampaoli's blog</a>  which were written first by Pavel Polischouk. It added some quirks to the snd-usb-audio driver enabling 24 bits, 96 kHz and other special features for the FTP. Then, I adapted it for 2.6.33 RT and <a href="http://files.parisson.com/debian/usbaudio-ftp-2.6.33.7-yomguy.patch">published it</a>.</p>
<p>Now that the kernel 2.6.39 includes almost all of the realtime functions - like threaded IRQs for example - I decided to produce the same patch for it. Not trivial for me because I'm not really a C developer and the driver architecture had been changed. But it just works now...</p>
<p>After some mail exchanges with interested people and beta testing, I'm very happy to <a href="http://files.parisson.com/debian/snd-usb-audio-FTP-2.6.39-yomguy-04.patch">release this patch</a>. You just need to apply it the 2.6.39 sources but NO RT patch anymore and compile the kernel. Don't forget to add "threadirqs" to the kernel boot arguments, for example adding it to the grub conf.</p>
<p>On Debian, editing /etc/default/grub :</p>
<div class="highlight"><pre><span class="n">GRUB_CMDLINE_LINUX</span><span class="p">=</span>&quot;<span class="n">threadirqs</span>&quot;
</pre></div>


<p>and then :</p>
<div class="highlight"><pre>$ <span class="n">sudo</span> <span class="n">update</span><span class="o">-</span><span class="n">grub</span>
</pre></div>


<p>Special configurations can be then loaded through a modprobe conf file. For example, to set the 24 bits mode on the Fast Track Pro plus digital inputs and outputs, add this to /etc/modprobe.d/fast-track-pro.conf :</p>
<div class="highlight"><pre><span class="n">options</span> <span class="n">snd_usb_audio</span>   <span class="n">vid</span><span class="p">=</span>0<span class="n">x763</span> <span class="n">pid</span><span class="p">=</span>0<span class="n">x2012</span> <span class="n">device_setup</span><span class="p">=</span>0<span class="n">xB</span> <span class="n">enable</span><span class="p">=</span>1
</pre></div>


<p>Here is a list of the possibilities in <a href="http://files.parisson.com/debian/fast-track-pro.conf">this example</a>.</p>
<p>Don't forget to comment out other snd-usb-audio entries in ? /etc/modprobe.d/alsa-base.conf</p>
<p>Thanks a LOT to Takashi Iwai, the patch has been <a href="http://git.kernel.org/?p=linux/kernel/git/tiwai/sound-2.6.git;a=commitdiff;h=0f5733b0c883158b13366ae34b5e4bd52a1ac346;hp=3101ba035ca9ba92f6cec7fd37348646b7a5cb61">applied to the sound kernel branch</a> and <a href="http://git.kernel.org/?p=linux/kernel/git/tiwai/sound-2.6.git;a=commitdiff;h=02e5fbf622aabf68bdc02282a17a3aeed054237a">merged</a> . It will be added to Linux 3.1 !</p>
<p>Enjoy ;)</p>
    </div><!-- /.entry-content -->
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://getpelican.com/">Pelican</a></li>
                                                    <li><a href="http://python.org/">Python.org</a></li>
                                                    <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                                                    <li><a href="#">You can modify those links in your config file</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/None" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://twitter.com/yomguy/">Twitter</a></li>
                                                    <li><a href="https://plus.google.com/u/0/107372663562513768053/posts">G+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'yomguysblog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>